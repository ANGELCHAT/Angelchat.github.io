---
title: "Configuration API v3"
category: "management"
weight: 20
desc: "Set up webhooks, manage properties, create bot agents."
---

# Introduction

Configuration API is a service for storing configuration of license. You can set up here different types of features such as properties or webhooks.

## Versioning

This documentation describes **the version 3.1** of the **Configuration API**.

## Authentication

Authentication for Confiugration API is handled by access tokens. Find out how to get an access token from [Agent authorization flows](https://developers.livechatinc.com/beta-docs/authorization/#agent-authorization-flows)<sup>[![LiveChat Link](link.svg)](https://developers.livechatinc.com/beta-docs/authorization/#agent-authorization-flows)</sup>. If a method requires particular authorization scopes, you’ll find them included in the method description. Each request should contain the `Authorization: Bearer <your_access_token>` header.


## Data centers

LiveChat system operates in two data centers: `dal` and `fra`. The default data center is `dal`.

All the LiveChat OAuth2.0 access tokens have a prefix: `dal-` or `fra-`. This prefix indicates the data center they belong to. If you need to specify the data center while making an API call, simply add the `X-Region: <token_prefix>` optional header.

Summing up, if the user token starts with `fra-`, you should add the `X-Region: fra header`. If the token starts with `dal-` you don’t have to specify the header.

## Propagation delay

All configurations set by this API will have action in system after max 2 minutes. This delay will be removed in the future.





# Bot Agents

Bot Agents enables writing integrations using the **Agent Chat API** - both [RTM](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api-v3.1/) and [Web](https://developers.livechatinc.com/beta-docs/agent-chat-web-api-v3.1/) - to communicate in chats as regular Agents.
A Bot Agent shares the SSO access token with the Agent who created the Bot. Each Bot Agent is a resource owned by an application in Developers Platform, identified by its own `client_id`. 

Unlike Agents, Bot Agents don't have passwords or emails - you cannot log in as a Bot. 


## Methods

#### The Bot Agents API endpoint

| HTTP method  | Base URL |
|-------|--------|
| `POST`|`https://api.livechatinc.com/v3.0/configuration/action/<action>`   |

#### Required headers

| Header   |      Value      |   |
|----------|:-------------:|------:|
| `Content-Type`	 |  `application/json`  |  |


### `create_bot_agent`

> **`create_bot_agent`** sample request

```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/agents/create_bot_agent \
  -H 'Authorization: Bearer <your_access_token>' \
  -H 'Content-Type: application/json' \
  -d '{
      "name": "Bot Name",
      "status": "accepting chats"
      }'
```

> **`create_bot_agent`** sample response 

```js
{
    "bot_agent_id": "5c9871d5372c824cbf22d860a707a578"
}
```

#### Specifics

|  |  |
|-------|--------|
| **Method URL**   | `https://api.livechatinc.com/v3.0/configuration/action/create_bot_agent`  |
| __Required scopes *__| `agents-bot--my:rw`  |

#### Request

| Request object                       | Type       | Required | Notes                                                                |
| ------------------------------------ | ---------- | -------- | -------------------------------------------------------------------- |
| `name`                               | `string`   | Yes      | Display name                                                         |
| `status` __*__                       | `string`   | Yes      | Agent status                                                         |
| `avatar`                             | `string`   | No       | Avatar URL                                                           |
| `max_chats_count`                    | `int`      | No       | Max. number of incoming chats that can be routed to an Agent, default: 6 |
| `groups`                             | `object[]` | No       | Groups an Agent belongs to                                          |
| `groups[].id`                        | `uint`     | Yes      | Group ID; required only when `group`'s included.                     |
| `groups[].priority` __**__           | `string`   | Yes      | Agent's priority in a group; required only when `group`'s included.    |
| `webhooks`                           | `object`   | No       | Webhooks sent to the Agent; for more info on possible values and payload, see [Webhooks](#webhooks).     |
| `webhooks.url`                       | `string`   | Yes      | Destination URL for webhooks; required only when `webhooks`'s included.       |
| `webhooks.secret_key`                | `string`   | Yes      | Secret sent in webhooks to verify webhook's source; required only when `webhooks`'s included.  |
| `webhooks.actions`                   | `object[]` | Yes      | Triggering actions; required only when `webhooks`'s included.  |
| `webhooks.actions[].name`            | `string`   | Yes      | The name of the triggering action; required only when `webhooks`'s included. |
| `webhooks.actions[].filters`         | `object`   | No       | Filters to check if a webhook should be triggered                      |
| `webhooks.actions[].additional_data` | `string[]` | No       | Additional data that will arrive with webhooks                        |

**__*)__ `status`**

| Possible value | Notes           |
| ------------- |:-------------:|
| `accepting chats`  | Agent is logged in. The chat router routes incoming chats to the Agent.     |
| `not accepting chats` | Agent is logged in, but the chat router doesn't route incoming chats to the Agent. |
| `offline` | Agent isn't logged in.    |


**__**)__ `groups[].priority`**

| Possible value | Notes           |
| ------------- |:-------------:|
| `first`  | The highest chat routing priority. Agents with the `first` priority get chats before others from the same group, e.g. Bots can get chats before regular Agents.  |
| `normal` | The medium chat routing priority. Agents with the `normal` priority get chats before those with the `last` priority, when there are no Agents with the `first` priority available with free slots in the group. |
| `last` | The lowest chat routing priority. Agents with the `last` priority get chats when there are no Agents with the `first` or `normal` priority available with free slots in the group.   |



### `remove_bot_agent`

> **`remove_bot_agent`** sample request

```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/action/remove_bot_agent \
  -H 'Authorization: Bearer <your_access_token>' \
  -H 'Content-Type: application/json' \
  -d '{
      "bot_agent_id": "505591fc9fc2d6e92798bed7d9d8f079"
      }'
```


#### Specifics

|  |  |
|-------|--------|
| **Method URL**   | `https://api.livechatinc.com/v3.0/configuration/action/remove_bot_agent`  |
| __Required scopes *__| `agents-bot--my:rw` `agents-bot--all:rw`  |

#### Request

| Parameter          | Required | Type     | Notes        |
| ------------------ | -------- | -------- | ------------ |
| `bot_agent_id`     |  Yes     | `string` | Bot Agent ID |


#### Response

No response payload (`200 OK`).



### `update_bot_agent`

> **`update_bot_agent`** sample request

```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/action/update_bot_agent \
  -H 'Authorization: Bearer <your_access_token>' \
  -H 'Content-Type: application/json' \
  -d '{
      "id": "ce54714e3d2b53adbfff09dbdbdd56e9",
      "name": "New Bot Name"
      }'
```

#### Specifics

|  |  |
|-------|--------|
| **Method URL**   | `https://api.livechatinc.com/v3.0/configuration/action/update_bot_agent`  |
| __Required scopes *__| `agents-bot--my:rw`  |

#### Request

| Parameter                       | Required       | Data type | Notes                                                  |
| ------------------------------------ | ---------- | -------- | ------------------------------------------------------ |
| `id`                                 | Yes   | `string`      | Bot agent ID                                           |
| `name`                               | No   | `string`       | Display name                                           |
| `avatar`                             | No   | `string`       | Avatar URL                                             |
| `status` __*__                       | No   | `string`       | Agent status                                           |
| `max_chats_count`                    | No      | `int`       | Maximum incoming chats that can be routed to the Agent |
| `groups`                             | No | `object[]`       | Groups the agent belongs to                            |
| `groups[].id`                        |  Yes    | `uint`      | Group ID, required only when `groups`'s present.       |
| `groups[].priority` __**__           | Yes   |  `string`     | Agent's priority in the group; required only when `groups`'s included.    |
| `default_group_priority` __***__    |   No | `string`        | The default routing priority for a group without defined priority. |
| `webhooks`                           | No   | `object`       | Webhooks sent to the Agent                             |
| `webhooks.url`                       | Yes   | `string`      | Destination URL for webhooks; required only when `webhooks`'s present.|
| `webhooks.secret_key`                | Yes   | `string`      | Secret sent in webhooks to verify webhook source; required when `webhooks`'s included. 
| `webhooks.actions`                   | Yes | `object[]`      | Triggering actions; required only when `webhooks`'s included.|
| `webhooks.actions[].name`            | Yes   | `string`      | The name of the triggering action; required only when `webhooks`'s included.|
| `webhooks.actions[].filters`         | No   | `object`       | Filters to check if a webhook should be triggered.        |
| `webhooks.actions[].additional_data` | No | `string[]`       | Additional data arriving with the webhook.          |

**__*)__ `status`**

| Possible value | Notes           |
| ------------- |:-------------:|
| `accepting chats`  | Agent is logged in. The chat router routes incoming chats to the Agent.     |
| `not accepting chats` | Agent is logged in, but the chat router doesn't route incoming chats to the Agent. |
| `offline` | Agent isn't logged in.    |

**__**)__ `groups[].priority`**

| Possible value | Notes           |
| ------------- |:-------------:|
| `first`  | The highest chat routing priority. Agents with the `first` priority get chats before others from the same group, e.g. Bots can get chats before regular Agents.  |
| `normal` | The medium chat routing priority. Agents with the `normal` priority get chats before those with the `last` priority, when there are no Agents with the `first` priority available with free slots in the group. |
| `last` | The lowest chat routing priority. Agents with the `last` priority get chats when there are no Agents with the `first` or `normal` priority available with free slots in the group.   |

**__***)__ `default_group_priority`**

| Possible value | Notes           |
| ------------- |:-------------:|
| `first`  | The highest chat routing priority. Agents with the `first` priority get chats before others from the same group, e.g. Bots can get chats before regular Agents.  |
| `normal` | The medium chat routing priority. Agents with the `normal` priority get chats before those with the `last` priority, when there are no Agents with the `first` priority available with free slots in the group. |
| `last` | The lowest chat routing priority. Agents with the `last` priority get chats when there are no Agents with the `first` or `normal` priority available with free slots in the group.   |
| `supervisor` | Bot works as `supervisor` so it will not be assigned to any chats.   |


#### Response

No response payload (`200 OK`).


### `get_bot_agents`


> **`get_bot_agents`** sample request

```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/action/get_bot_agents \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
        "all": false
	    }'
```

> **`get_bot_agents`** sample response 

```js
{
    "bot_agents": [{
        "id": "5c9871d5372c824cbf22d860a707a578",
        "name": "John Doe",
        "avatar": "livechat.s3.amazonaws.com/1011121/all/avatars/bdd8924fcbcdbddbeaf60c19b238b0b0.jpg",
        "status": "accepting chats"
    }]
}
```

#### Specifics

|  |  |
|-------|--------|
| **Method URL**   | `https://api.livechatinc.com/v3.0/configuration/action/get_bot_agents`  |
| __Required scopes *__| `agents-bot--my:ro` `agents-bot--all:ro`  |


#### Request

| Parameter          | Required | Type     | Notes                                                            |
| ------------------------ | -------- | -------- | ---------------------------------------------------------------- |
| `all`                |  No      | `bool` |  Get all Bot Agents, if `false` returns only caller's Bot Agents, default value is `false`|



### `get_bot_agent_details`


> **`get_bot_agent_details`** sample request

```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/action/get_bot_agent_details \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
        "bot_agent_id": "5c9871d5372c824cbf22d860a707a578"
	    }'
```

> **`get_bot_agent_details`** sample response 

```js
{
    "bot_agent": {
        "id": "5c9871d5372c824cbf22d860a707a578",
        "name": "John Doe",
        "avatar": "livechat.s3.amazonaws.com/1011121/all/avatars/bdd8924fcbcdbddbeaf60c19b238b0b0.jpg",
        "status": "accepting chats",
        "application": {
            "client_id": "asXdesldiAJSq9padj"
        },
        "max_chats_count": 6,
        "groups": [{
            "id": 0,
            "priority": "normal"
        }, {
            "id": 1,
            "priority": "normal"
        }, {
            "id": 2,
            "priority": "first"
        }],
        "webhooks": {
            "url": "http://myservice.com/webhooks",
            "secret_key": "JSauw0Aks8l-asAa",
            "actions": [{
                "name": "incoming_chat_thread",
                "filters": {
                  "chat_properties": {
                     "source": {
                        "type": {
                           "values": ["facebook", "twitter"]
                        }
                      }
                  }
                }
            },{
                "name": "incoming_event",
                "additional_data": ["chat_properties"]
            }]
        }
    }
}
```

#### Specifics

|  |  |
|-------|--------|
| **Method URL**   | `https://api.livechatinc.com/v3.0/configuration/action/get_bot_agent_details`  |
| __Required scopes *__| `agents-bot--my:ro` `agents-bot--all:ro`  |

#### Request

| Parameter          | Required | Type     | Notes                                                            |
| ------------------------ | -------- | -------- | ---------------------------------------------------------------- |
| `bot_agent_id`                |  Yes      | `string` | Bot Agent ID |



# Properties

> **The general property format** 

```js
{
    "<properties>": {
        "<namespace>": {    
            "<property_name>": "<property_value>",    
            "<property_name>": "<property_value>"      
        }
    }
}
```

Properties are key-value storages. They can be set within a chat, a thread, or an event. 

You can create properties within a license and configure them using the **Configuration API**. Properties are grouped in _namespaces_, which helps distinguishing which property belongs to a given integration. Your namespace is always named after your `application id`.

You can configure the property [type](#property-types), [location](#property-locations), and [domain](#property-domain).


### Property types

There are four property types:

- `int` (int32)
- `bool`
- `string`
- `tokenized_string`

The `tokenized_string` type is a string split to tokens before indexing in our search engine. It can be useful for longer strings, such as messages. It should not be used for keywords.

### Property locations

Properties can be set for the following locations:

- chat
- thread
- event

You can configure access to properties within those locations. For example, you could create a property visible only to agents in a chat and thread, but not in an event.

### Property domain

The **property domain** is a set of values that a property can be assigned to.

Property domain can be configured in two ways:

- by defining a set of values explicitly allowed in this property (for example `[1, 2, 3]`).
- by defining a range. All values within the range are allowed in this property. It works only for numeric types (for example a range from `1` to `3`).

#### Test properties

Each license has some test properties that you can use to play with properties.

| Namespace | Property                    | Type               | Access                     |
| --------- | --------------------------- | ------------------ | -------------------------- |
| `test`    | `bool_property`             | `bool`             | rw for everyone everywhere |
| `test`    | `int_property`              | `int`              | rw for everyone everywhere |
| `test`    | `string_property`           | `string`           | rw for everyone everywhere |
| `test`    | `tokenized_string_property` | `tokenized_string` | rw for everyone everywhere |

The `tokenized_string` property is similar to the `string` type. The values of a `tokenized_string` are split in tokens to enable searching for each word separately.

## Methods

#### The Properties API enpoint

| HTTP method  | Base URL |
|-------|--------|
| `POST`|`https://api.livechatinc.com/v3.0/configuration/action/<action>`   |

#### Required headers

| Header   |      Value      |   |
|----------|:-------------:|------:|
| `Content-Type`	 |  `application/json`  |  |

### `create_properties`

> **`create_properties`** sample request

```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/action/create_properties \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
      "score": {
          "type": "int",
          "locations": {
              "chat": {
                  "access": {
                      "agent": {
                          "read": true,
                          "write": true
                      },
                      "customer": {
                          "read": true,
                          "write": true
                      }
                  }
              }
          }
      },
      "comment": {
          "type": "string",
          "locations": {
              "chat": {
                  "access": {
                      "agent": {
                          "read": true,
                          "write": true
                      },
                      "customer": {
                          "read": true,
                          "write": true
                         }
                     }
                 }
             }
      }'
```


#### Specifics

|  |  |
|-------|--------|
| **Method URL**   | `https://api.livechatinc.com/v3.0/configuration/action/create_properties`  |
| __Required scopes *__| `properties--my:rw`(to create my _properties_ in my _namespace_)  |


#### Response

No response payload (`200 OK`).


| Parameter                                                  | Required   | Data type              | Notes                                                                        |
| ---------------------------------------------------------- | ---------- | --------------------- | ----------------------------------------------------------------------------- |
| `<property_name>.type`                                     | Yes        | `string`              | Possible values: `int`, `string`, `bool`, and `tokenized_string`              |
| `<property_name>.locations`                                | Yes        | `object`              |                                                                               |
| `<property_name>.locations.<location>`                     | min. one `location` | `object`     | Possible values of `<location>`: `chat`, `thread`, `event`                    |
| `<property_name>.locations.<location>.access.<user>`       | min. one `user` | `object`         | Possible values of `<user>`: `agent`, `customer`                              |
| `<property_name>.locations.<location>.access.<user>.read`  | Yes         | `bool`               | If set to `true`, then `<user>` can read this property.                        |
| `<property_name>.locations.<location>.access.<user>.write` | Yes         | `bool`               | If set to `true`, then `<user>` can write to this property.                   |
| `<property_name>.description`                              | No         | `string`              | Property description                                                          |
| `<property_name>.domain` __*__                             | No          | `[<type>]`           | Array of values that properties can be set to                                 |
| `<property_name>.range` __*__                              | No          | `object`             | Range of values that properties can be set to                                 |
| `<property_name>.range.from`                               | No          | `int`                | Only values **equal** or **greater** than this parameter can be set to this property.  |
| `<property_name>.range.to`                                 | No          | `int`                | Only values **equal** or **lower** than this parameter can be set to this property.    |

__*)__ Only one `domain` and one `range` can be set for a single property.


### `get_property_configs`

> **`get_property_configs`** sample request with required params only

```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/action/get_property_configs \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{}'
```

> **`get_property_configs`** sample response 

```js
{
    "58737b5829e65621a45d598aa6f2ed8e":{
    "greeting":{
    "type":"string",
    "locations":{
      "chat":{
        "access":{
          "agent":{
            "read":true,
            "write":false
          },
          "customer":{
            "read":true,
            "write":true
          }
        }
      }
    }
    "domain": ["hello", "hi"]
  },
  "scoring":{
    "type":"int",
    "locations":{
      "event":{
        "access":{
          "agent":{
            "read":true,
            "write":true
          }
        }
      }
    },
    "range": {
      "from": 0,
      "to": 10
    }
    //...
  },
  "other_namespace": {
    //
  }
  ...
}
```

#### Specifics

|  |  |
|-------|--------|
| **Method URL**   | `https://api.livechatinc.com/v3.0/configuration/action/get_property_configs`  |
| __Required scopes *__| `properties--my:ro` `properties--all:ro` (to create properties in all _namespaces_)  |


#### Request

| Parameter          | Required | Data type     | Notes                                                            |
| ------------------------ | -------- | -------- | ---------------------------------------------------------------- |
| `all`                |   No     | `bool` |  If set to `true`, it returns all properties within a given license; Default: `false`| 

# Webhooks

Webhooks notify you when events are triggered.

-------------------------------------------------------------------------------------------------------------------------

> **The general webook format**

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

## Available webhooks

|   |  |
|-------|--------| 
| **chats** | [`incoming_chat_thread`](#incoming-chat-thread) [`thread_closed`](#thread-closed)|
| **chat users** |[`chat_user_added`](#chat-user-added) [`chat_user_removed`](#chat-user-removed)   | 
| **events** | [`incoming_event`](#incoming-event) [`incoming_rich_message_postback`](#incoming-rich-message-postback) |
| **properties (chat/thread/event)** | [`chat_properties_updated`](#chat-properties-updated) [`chat_properties_deleted`](#chat-properties-deleted) [`chat_thread_properties_updated`](#chat-thread-properties-updated) [`chat_thread_properties_deleted`](#chat-thread-properties-deleted)  |  
| **thread tags** | [`chat_thread_tagged`](#chat-thread-tagged) [`chat_thread_untagged`](#chat-thread-untagged) | 
| **status** | [`agent_status_changed`](#agent-status-changed) [`agent_deleted`](#agent-deleted)| 
| **other** | [`last_seen_timestamp_updated`](#last-seen-timestamp-updated)  | 

### chats

-------------------------------------------------------------------------------------------------------------------------

#### `incoming_chat_thread`

> **`incoming_chat_thread`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "chat": {
		"id": "PJ0MRSHTDG",
		"users": [
			// array of "User" objects
		],
		"properties": {
			"source": {
				"type": "facebook"
			},
			...
		},
		"thread": {
			// "Thread" object
		}
	}
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

#### `thread_closed`

> **`thread_closed`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	"thread_id": "K600PKZON8",
	"user_id": "b7eff798-f8df-4364-8059-649c35c9ed0c" // optional
    },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

#### Webhook payload

| Object      | Notes                                  |
| ----------- | -------------------------------------- |
| `user_id`   | Missing if a thread was closed by the router |

### chat users

-------------------------------------------------------------------------------------------------------------------------

#### `chat_user_added`

> **`chat_user_added`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	"thread_id": "K600PKZON8",
	"user": {
		// "User > Customer" or "User > Agent" object
	    },
	"user_type": "agent"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

#### Webhook payload

| Object      | Notes                                   |
| ----------- | --------------------------------------- |
| `user_type` | Possible values: `agent`, `customer`    |


#### `chat_user_removed`

> **`chat_user_removed`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	"thread_id": "K600PKZON8",
	"user_id": "agent1@example.com",
	"user_type": "agent"
    },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

#### Webhook payload

| Object      | Notes                                   |
| ----------- | --------------------------------------- |
| `user_type` | Possible values: `agent`, `customer`    |


### events

-------------------------------------------------------------------------------------------------------------------------

#### `incoming_event`

> **`incoming_event`** webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	"thread_id": "K600PKZON8",
	"event": {
		// "Event" object
	}
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

#### `incoming_rich_message_postback`

> **`incoming_rich_message_postback`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "user_id": "b7eff798-f8df-4364-8059-649c35c9ed0c",
	"chat_id": "PJ0MRSHTDG",
	"thread_id": "K600PKZON8",
	"event_id": "a0c22fdd-fb71-40b5-bfc6-a8a0bc3117f7",
	"postback": {
		"id": "action_yes",
		"toggled": true
	}
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

### properties

-------------------------------------------------------------------------------------------------------------------------

#### `chat_properties_updated`

> **`chat_properties_updated`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	"properties": {
		"rating": {
			"score": {
				"value": 1
			},
			"comment": {
				"value": "Very good, veeeery good"
			}
		}
	}
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

#### Webhook payload

| Object       | Notes                                                                                                      |
| ------------ | ---------------------------------------------------------------------------------------------------------- |
| `properties` | Not a full `properties` object. This push shows only the properties, which have been recently updated. |

#### `chat_properties_deleted`

> **`chat_properties_deleted`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	"properties": {
		"rating": ["score", "comment"]
		}
	}
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```
#### Webhook payload

| Object       | Notes                                                                                                      |
| ------------ | ---------------------------------------------------------------------------------------------------------- |
| `properties` | Not a full `properties` object. This push shows only the properties, which have been recently updated. |


#### `chat_thread_properties_updated`

> **`chat_thread_properties_updated`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	"thread_id": "K600PKZON8",
	"properties": {
		"rating": {
			"value": {
				"value": 1
			},
			"comment": {
				"value": "Very good, veeeery good"
			}
		}
	}
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

#### Webhook payload

| Object       | Notes                                                                                                      |
| ------------ | ---------------------------------------------------------------------------------------------------------- |
| `properties` | Not a full `properties` object. This push shows only the properties, which have been recently updated. |


#### `chat_thread_properties_deleted`

> **`chat_thread_properties_deleted`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
	"chat_id": "PJ0MRSHTDG",
	"thread_id": "K600PKZON8",
	"properties": {
		"rating": ["score", "comment"]
		}
	}
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

#### Webhook payload

| Object       | Notes                                                                                                      |
| ------------ | ---------------------------------------------------------------------------------------------------------- |
| `properties` | Not a full `properties` object. This push shows only the properties, which have been recently updated. |


### thread tags

-------------------------------------------------------------------------------------------------------------------------

#### `chat_thread_tagged`

> **`chat_thread_tagged`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	"thread_id": "K600PKZON8",
	"tag": "bug_report"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

#### `chat_thread_untagged`

> **`chat_thread_untagged`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	"thread_id": "K600PKZON8",
	"tag": "bug_report"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

### status

-------------------------------------------------------------------------------------------------------------------------

#### `agent_status_changed`

> **`agent_status_changed`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "agent_id":"5c9871d5372c824cbf22d860a707a578",
    "status": "accepting chats"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

#### Webhook payload

| Object      | Notes                                  |
| ----------- | -------------------------------------- |
| `status`   | Possible values: `accepting chats`, `not accepting chats`, `offline` | 

#### `agent_deleted`

> **`agent_deleted`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
    "agent_id": "5c9871d5372c824cbf22d860a707a578"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

### other

-------------------------------------------------------------------------------------------------------------------------

#### `last_seen_timestamp_updated`

> **`last_seen_timestamp_updated`** sample webhook

```js
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "payload": {
	"user_id": "b7eff798-f8df-4364-8059-649c35c9ed0c",
	"chat_id": "PJ0MRSHTDG",
    "timestamp": 123456789  
    },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```


## Methods

#### The Webhooks API enpoint

| HTTP method  | Base URL |
|-------|--------|
| `POST`|`https://api.livechatinc.com/v3.0/customer/action/<action>`   |


#### Required headers

| Header   |      Value      |   |
|----------|:-------------:|------:|
| `Content-Type`	 |  `application/json`  |  |


### `register_webhook`

> **`register_webhook`** sample request

```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/action/register_webhook \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
        "url": "http://myservice.com/webhooks",
        "description": "Test webhook",
        "action": "thread_closed",
        "secret_key": "laudla991lamda0pnoaa0"  
		  }'
```

> **`register_webhook`** sample response 

```js
    {
        "webhook_id": "pqi8oasdjahuakndw9nsad9na"
    }
```

#### Specifics

|  |  |
|-------|--------|
| **Method URL**   | `https://api.livechatinc.com/v3.0/configuration/action/register_webhook`  |
| __Required scopes *__| `webhooks--my:rw`  |


| Request object                           | Required       | Data type | Notes                                                                    |
| ---------------------------------------- | ---------- | -------- | ---------------------------------------------------------------------------------------- |
| `action`__*__                            | Yes  |  `string`     | The triggerring action                                                                    |
| `secret_key`                             | Yes  |  `string`     | The secret key sent in webhooks to verify the source of a webhook                         |
| `url`                                    | Yes  |  `string`     | Destination URL for the webhook                                                           |
| `additional_data`__**)__                 | No   |  `[]string`   | Additional data that will arrive with the webhook                                         |
| `description`                            | No   |  `string`     | Webhook description                                                                       |
| `filters`                                | No   |  `object`     | Filters to check if a webhook should be triggered                                         |
| `filters.author_type`                    | No   |  `string`     | Possible values: `customer`, `agent`; allowed only for the `incoming_event` action        |
| `filters.only_my_chats`                  | No   |  `bool`       | `true` or `false`; triggers webhooks only for chats with the property `source.client_id` set to my `client_id` |
| `filters.chat_member_ids`                | No   |  `object`     | Only one filter (`agents_any` or `agents_exclude`) is allowed                              |
| `filters.chat_member_ids.agents_any`     | No   |  `[]string`   | Array of agent ids;; If any specified agent is in chat, webhook will be triggered.         |
| `filters.chat_member_ids.agents_exclude` | No   |  `[]string`   | Array of agent ids; If any specified agent is in chat, webhook will not be triggered.      |


##### __*)__ `action`

| Possible value        | Triggered by the push        | Available filters  |
| ------------- |:-------------:| -----:|
| `incoming_chat_thread` | [`incoming_chat_thread`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#incoming-chat-thread) | `chat_member_ids`, `only_my_chats` |
| `incoming_event`  | [`incoming_event`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#incoming-chat-thread)  |   `chat_member_ids` and `author_type`, `only_my_chats` |
| `incoming_rich_message_postback` | [`incoming_rich_message_postback`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#incoming-rich-message-postback) | `chat_member_ids`, `only_my_chats`   |
| `last_seen_timestamp_updated`| [`last_seen_timestamp_updated`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#last_seen_timestamp_updated)   | `chat_member_ids`, `only_my_chats`   |
| `thread_closed`| [`thread_closed`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#thread_closed)   |  `chat_member_ids`, `only_my_chats`  |
| `chat_properties_updated`  | [`chat_properties_updated`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#chat_properties_updated)   |  `chat_member_ids`, `only_my_chats`  |
| `chat_properties_deleted`  | [`chat_properties_deleted`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#chat_properties_deleted)   |  `chat_member_ids`, `only_my_chats`  |
| `chat_thread_properties_updated`  | [`chat_thread_properties_updated`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#chat_thread_properties_updated)   |  `chat_member_ids`, `only_my_chats`  |
| `chat_thread_properties_deleted`  | [`chat_thread_properties_deleted`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#chat_thread_properties_deleted)   |  `chat_member_ids`, `only_my_chats`  |
| `chat_user_added`  | [`chat_user_added`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#chat_user_added)   |  `chat_member_ids`, `only_my_chats`  |
| `chat_user_removed`  | [`chat_user_removed`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#chat_user_removed)   |  `chat_member_ids`, `only_my_chats`  |
| `chat_thread_tagged`  | [`chat_thread_tagged`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#chat_thread_tagged)   |  `chat_member_ids`, `only_my_chats`  |
| `chat_thread_untagged`  | [`chat_thread_untagged`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#chat_thread_untagged)   |  `chat_member_ids`, `only_my_chats`  |
| `agent_status_changed`  | [`agent_status_changed`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#agent_status_changed)   | `chat_member_ids`   |
| `agent_deleted`  | [`agent_deleted`](https://developers.livechatinc.com/beta-docs/agent-chat-rtm-api/#agent_deleted)   |  `chat_member_ids`  |


##### __**)__ `additional_data`

| Possible value | Available for actions           |
| ------------- |:-------------:|
| `access`     | `incoming_event`, `chat_user_added`      |
| `chat_properties`      | All actions, except for `agent_status_changed` and `agent_deleted` |
| `thread_id` | `chat_user_added`     |



### `get_webhooks_config`

> **`get_webhooks_config`** sample request

```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/action/get_webhooks_config \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{}'
```

> **`get_webhooks_config`** sample response 

```js
{
  [
    {
      "webhook_id": "pqi8oasdjahuakndw9nsad9na",
      "url": "http://myservice.com/webhooks",
      "description": "Test webhook",
      "action": "thread_closed",
      "secret_key": "laudla991lamda0pnoaa0",
      "filters": {
        "chat_member_ids": {
          "agents_any": ["johndoe@mail.com"]
        }
      },
      "owner_client_id": "asXdesldiAJSq9padj"
    }
  ]
}
```

#### Specifics

|  |  |
|-------|--------|
| **Method URL**   | `https://api.livechatinc.com/v3.0/configuration/action/get_webhooks_config`  |
| __Required scopes *__| `webhooks--my:rw` `webhooks--all:ro`  |


### `unregister_webhook`

> **`unregister_webhook`** sample request

```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/action/unregister_webhook \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
            "webhook_id": "pqi8oasdjahuakndw9nsad9na"
		  }'
```

#### Specifics

|  |  |
|-------|--------|
| **Method URL**   | `https://api.livechatinc.com/v3.0/configuration/action/unregister_webhook`  |
| __Required scopes *__| `webhooks--my:rw` `webhooks--all:rw`  |


#### Request

| Parameter | Required     | Data type | Notes      |
| -------------- | -------- | -------- | ---------- |
| `webhook_id`   | Yes | `string`      | Webhook ID |


#### Response

No response payload (`200 OK`).


# Contact us

If you found a bug or a typo, you can't let us know directly on GitHub. In case of any questions or feedback, don't hesitate to contact us at [developers@livechatinc.com] (mailto:developers@livechatinc.com). We'll be happy to hear from you!